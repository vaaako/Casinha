<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<%- include('partials/embed'); %>


	<link rel="stylesheet" href="/styles/base.css">
	<link rel="stylesheet" href="/styles/sidebar.css">
	<link rel="stylesheet" href="/styles/loadmore.css">
	<link rel="stylesheet" href="/styles/home.css">
	<link rel="stylesheet" href="/styles/posts.css">

	<script type="text/javascript" src="/scripts/home.js" defer></script>
	<script type="text/javascript" src="/scripts/reaction.js" defer></script>

	<!-- Bootstrap icons -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
	<title>Casinha</title>
</head>
<body>
	<%- include('partials/sidebar', { user }); %>
	<header id="makepost">
		<h1><a href="/">CASINHA</a></h1>

		<% if(haveMail) { %>
			<h2 style="color: lightblue; margin-bottom: 20px;">
				<a style="position: fixed; top: 0; left: 0; margin-left: 70px; margin-top: 20px; font-size: 20px;" href="/mails">
					<!-- You got a mail! -->
					<i class="bi bi-envelope"></i>
				</a>
			</h2>
		<% } %>


		<%- include('partials/message', { message }); %>
		<form action="/makepost" enctype="multipart/form-data" id="postform" method="post">
			<textarea id="postarea" oninput="autogrow(this);" name="post" maxlength="300" placeholder="Post"></textarea>
			<!-- <input class="bi bi-plus-circle" type="file" name="postmedia" accept="image/* | video/*"> -->
			<input type="file" name="postmedia" accept="image/* | video/*">

			<button id="postbtn" class="submit-button" type="submit">Post</button>
		</form>
	</header>
	
	<section id="posts">
		<% for(const post of allPosts) { %>
			<%- include('partials/posts', { post }); %>
		<% } %>
	</section>

	<%- include('partials/loadmore-posts', { username: undefined, parentpostid: undefined }); %>



<!-- 
	<% if(message) { %>
		<script>
			alert('<%= message %> \n(Temporary error message)');
			window.history.replaceState(null, null, '/');
		</script>
	<% } %>
 -->
</body>
</html>